<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script>
        var $ = jQuery = require("jquery")
      </script>
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
    <title>ADM</title>
    <link rel="stylesheet" href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css">

    <link rel="stylesheet" href="../../css/bootstrap.css">
    <script type="text/javascript" src="../../js/bootstrap.js"></script>
    
    
    <link rel="stylesheet" href="../../css/style-consulta.css">

    <script src="../../js/scripts.js" charset="UTF-8"></script>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/css/bootstrap-select.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/js/bootstrap-select.min.js"></script>


    <link rel="stylesheet" href="../../css/navbarstyle.css">
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
    <script type="text/javascript" src="../../js/navbar.js"></script>
</head>
    <body>
        <script>
            loadSidebar()
        </script>
    <div class="main-content">

            <div class="card" style="display: inline-block;">
              
                    <div class="card-header">
                        <h2>Filtros:</h2>
                    </div>

                    

                    <div class="card-body a">
                        <select id="instituicoes" class="selectpicker" multiple data-live-search="true" title="Selecionar Instituições" data-size=8 data-actions-box="true">

                        </select>

                        
                        <script>

                            var options = {
                                scriptPath: path.join(__dirname,'../../engine/consulta-escritorio/'),
                                args: ["instituicoes","instituicoes"]
                            }

                            PythonShell.run('main.py', options, function(err, results){
                                if (err) throw err;
                                formated = results[0].replace('[','')
                                formated = formated.replace(']','')
                                formated = formated.replace(/'/g,'')
                                
                                //formated = formated.replace(/\s/g,'')

                                let array2 = formated.split(',')
                                array2 = array2.map(s => s.trim());
                                console.log(array2)

                                for (var i = 0; i< array2.length; i++){
                                    $("#instituicoes").append('<option value="'+array2[i]+'">'+array2[i]+'</option>');
                                    $("#instituicoes").selectpicker("refresh");
                                }

                            })


                        </script>


                        
                        <select id="escritorios" class="selectpicker" multiple data-live-search="true" title="Adicionar Escritórios" data-size=8 data-actions-box="true">

                        </select>
                        
                        <script>

                            var options = {
                                scriptPath: path.join(__dirname,'../../engine/consulta-escritorio/'),
                                args: ["escritorios","escritorios"]
                            }

                            PythonShell.run('main.py', options, function(err, results){
                                if (err) throw err;
                                formated = results[0].replace('[','')
                                formated = formated.replace(']','')
                                formated = formated.replace(/'/g,'')
                                formated = formated.replace(/\s/g,'')

                                let array2 = formated.split(',')
                                console.log(array2)

                                for (var i = 0; i< array2.length; i++){
                                    $("#escritorios").append('<option value="'+array2[i]+'">'+array2[i]+'</option>');
                                    $("#escritorios").selectpicker("refresh");
                                }

                            })


                        </script>

                        <button id="buscar-escritorios" onclick="buscarEscritorios()" class="btn btn-success" style="margin-top: 15px; margin-left: 55px;">
                            Buscar
                        </button>
                    </div>
           

            </div>

                <div class="projects">
                    <div class="card">
                        <div class="card-header">
                            <h2>Resultados:</h2>
                        </div>

                        <div class="card-body b">
                            
                        </div>

                    </div>

                </div>
                
    </div>

</body>
</html>